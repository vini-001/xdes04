<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emitir - SGTV</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Emitir - SGTV</h1>
        <nav>
            <ul>
                <li><a href="index.html">Início</a></li>
                <li><a href="cadastrar.html">Cadastrar</a></li>
                <li><a href="consultar.html">Consultar</a></li>
                <li><a href="editar.html">Editar</a></li>
                <li><a href="remover.html">Remover</a></li>
                <li><a href="emitir.html">Emitir</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Emitir Notas e Relatórios</h2>
        <form id="emitirForm">
            <label for="emitirTipo">Escolha o tipo de emissão:</label>
            <select id="emitirTipo" name="emitirTipo">
                <option value="notas">Notas Semestrais</option>
                <option value="relatorio">Relatório de Desempenho</option>
            </select>
            <div id="emitirCampos"></div>
            <button type="submit">Emitir</button>
        </form>
        <div id="resultadosEmissao"></div>
    </main>
    <footer>
        <p>&copy; 2024 SGTV. Todos os direitos reservados.</p>
    </footer>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const emitirForm = document.getElementById('emitirForm');
            const emitirTipo = document.getElementById('emitirTipo');
            const emitirCampos = document.getElementById('emitirCampos');
            const resultadosEmissao = document.getElementById('resultadosEmissao');

            emitirTipo.addEventListener('change', (e) => {
                switch(e.target.value) {
                    case 'notas':
                        emitirCampos.innerHTML = `
                            <label for="turmaNotas">Código da Turma:</label>
                            <input type="text" id="turmaNotas" name="turmaNotas" required>
                        `;
                        break;
                    case 'relatorio':
                        emitirCampos.innerHTML = `
                            <label for="codigoTurma">Código da Turma:</label>
                            <input type="text" id="codigoTurma" name="codigoTurma" required>
                            <label for="atividade">Atividade:</label>
                            <input type="text" id="atividade" name="atividade" required>
                            <label for="professorRelatorio">Professor:</label>
                            <input type="text" id="professorRelatorio" name="professorRelatorio" required>
                        `;
                        break;
                    default:
                        emitirCampos.innerHTML = '';
                }
            });

            emitirForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const emitirTipoValue = emitirTipo.value;
                if (emitirTipoValue === 'notas') {
                    const turmaNotas = document.getElementById('turmaNotas').value;
                    const notas = JSON.parse(localStorage.getItem('notas')) || [];
                    const alunos = JSON.parse(localStorage.getItem('alunos')) || [];
                    const notasTurma = notas.filter(nota => nota.turma === turmaNotas);
                    let resultadosHTML = '<table><tr><th>Aluno</th><th>Nota</th></tr>';
                    notasTurma.forEach(nota => {
                        const aluno = alunos.find(aluno => aluno.cpf === nota.aluno);
                        resultadosHTML += `<tr><td>${aluno.nome} (${aluno.cpf})</td><td>${nota.nota}</td></tr>`;
                    });
                    resultadosHTML += '</table>';
                    resultadosEmissao.innerHTML = resultadosHTML;
                }
                // Implement logic for relatorio if needed
            });
        });
    </script>
</body>
</html>
